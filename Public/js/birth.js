function month_days(e,t){switch(t){case 2:return e%4==0&&e%100!=0||e%400==0?29:28;case 4:case 6:case 9:case 11:return 30;default:return 31}}function zfill(e,t){var n=""+e;while(n.length<t)n="0"+n;return n}function select_span(e,t,n,r,i,s,o,u){function h(t){return e.find("select[name="+t+"]")}function g(){var e=v.val(),t=p.val()-0,n=d.val()-0,r=month_days(t,n),i=[];s||i.push(l);for(f=o?o(t,n):1;f<=r;++f)i.push('<option value="'+f+'">'+f+"</option>");v.html(i.join("")).val(e>r?0:e)}function y(){var e=d.val(),t=v.val();m.val(p.val()+(e.length<2?"0":"")+e+(t.length<2?"0":"")+t)}var a=['<input type="hidden" value="0" name="'+t+'">'],f,e,l='<option value="0">- 日 -</option>',c=r>i?-1:1;if(r!=i){f=r,a.push('<select id="'+t+'_year"class="'+t+'_year date_year" name="year">'),s||a.push('<option value="0000">- 年 -</option>');for(;f!=i;f+=c)a.push('<option value="'+f+'">'+f+"</option>");a.push("</select>")}a.push('<select id="'+t+'_month" class="'+t+'_month date_month" name="month">'),s||a.push('<option value="0">- 月 -</option>');for(f=1;f<13;++f)a.push('<option value="'+f+'">'+f+"</option>");a.push('</select><select id="'+t+'_day"class="'+t+'_day date_day" name="day">'+l+"</select>");if(u){a.push('<select id="'+t+'_hour" class="'+t+'_hour date_hour" name="'+t+'_hour">');for(f=0;f<24;++f)a.push('<option value="'+f+'">'+zfill(f,2)+"</option>");a.push("</select>:"),a.push('<select id="'+t+'_minute" class="'+t+'_minute date_minute" name="'+t+'_minute">');for(f=0;f<60;f+=5)a.push('<option value="'+f+'">'+zfill(f,2)+"</option>");a.push("</select>")}e.html(a.join(""));var p=h("year"),d=h("month"),v=h("day"),m=e.find("input");d.change(g),p.change(g),e.find("select").change(y),n-=0,n&&(p.val(parseInt(n/1e4)),d.val(parseInt(n/100)%100).change(),v.val(n%100),m.val(n))}function select_date(e,t,n,r,i,s,o){document.write('<span id="'+e+'"></span>'),select_span($("#"+e),e,t,n,r,i,s,o)}function select_birthday(e,t){var n=new Date,r=n.getFullYear();select_date(e,t,r,r-128)}function select_future(e,t){var n=new Date,r=n.getFullYear();select_date(e,t,r,r+128)};